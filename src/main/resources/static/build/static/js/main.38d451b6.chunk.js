(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{50:function(e,t,n){e.exports=n(78)},74:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),u=n.n(c),i=n(11),l=n.n(i),o=n(17),s=n(15),m=n(82),f=n(80),d=n(48),v=n(85),E=function(e){var t=e.text,n=e.onClick;return r.a.createElement("input",{className:"button m-1",type:"button",value:t,onClick:n})},h=function(e){var t=e.handleCreateGame;return r.a.createElement(v.a,{className:"justify-content-center"},r.a.createElement(v.a.Item,null,r.a.createElement(E,{text:"Easy 9x9",onClick:function(){return t(9,9,10,"easy")}})),r.a.createElement(v.a.Item,null,r.a.createElement(E,{text:"Medium 16x16",onClick:function(){return t(16,16,40,"medium")}})),r.a.createElement(v.a.Item,null,r.a.createElement(E,{text:"Hard 16x30",onClick:function(){return t(16,30,99,"hard")}})))},p=n(29),g=n(25),b=function(e){var t=e.tile,n=e.open,a=e.toggleFlag,c=function(e){e.preventDefault(),a()};return t.isFlagged?r.a.createElement(g.b,{className:"gridItem",onContextMenu:c,style:{color:"red",backgroundColor:"grey"}}):r.a.createElement("div",{className:"gridItem",onClick:n,onContextMenu:c})},O=function(e,t){return Array.from({length:e},(function(){return Array.from({length:t},(function(){return y()}))}))},y=function(){return{value:0,isOpen:!1,isFlagged:!1,isMine:!1}},k=function(e,t,n,a){for(var r=n;r>0;){var c=w(e),u=w(t);A(c,u,a)||(a[c][u].isMine=!0,x(c,u,a),r-=1)}},w=function(e){return Math.floor(Math.random()*e)},x=function(e,t,n){j(e-1,t-1,n),j(e+1,t+1,n),j(e-1,t+1,n),j(e+1,t-1,n),j(e-1,t,n),j(e+1,t,n),j(e,t-1,n),j(e,t+1,n)},j=function(e,t,n){S(e,t,n)||(n[e][t].value+=1)},C=function e(t,n,a){S(t,n,a)||a[t][n].isOpen||A(t,n,a)||(a[t][n].isOpen=!0,F(t,n,a)&&(e(t-1,n-1,a),e(t+1,n+1,a),e(t-1,n+1,a),e(t+1,n-1,a),e(t,n-1,a),e(t-1,n,a),e(t,n+1,a),e(t+1,n,a)))},N=function(e,t,n){return S(e,t,n)||T(e,t,n)||!A(e,t,n)?(C(e,t,n),!1):(n[e][t].isOpen=!0,!0)},S=function(e,t,n){return e<0||t<0||e>n.length-1||t>n[0].length-1},I=function(e,t){return e+t.filter(M).length},M=function(e){return!e.isOpen&&!e.isMine},F=function(e,t,n){return 0===n[e][t].value},T=function(e,t,n){return n[e][t].isFlagged},A=function(e,t,n){return n[e][t].isMine},G=function(e){var t=e.value,n=e.handleClick;return r.a.createElement("div",{className:"gridItem",style:{color:"".concat(function(){switch(t){case 0:return"whitesmoke";case 1:return"green";case 2:return"orange";case 3:return"red";case 4:return"purple";default:return"black"}}()),backgroundColor:"whitesmoke"},onClick:n,onContextMenu:function(e){return e.preventDefault()}},0===t?"":t)},B=function(e){var t=e.tile,n=e.openAdjacentTiles;return t.isMine?r.a.createElement(g.a,null):r.a.createElement(G,{value:t.value,handleClick:n})},R=function(e){var t=e.board,n=e.isOver,a=e.setGameOver,c=e.updateBoard;if(!t)return null;var u=function(e,r){if(!function(e,t,n){for(var a=0,r=e-1;r<=e+1;r++)for(var c=t-1;c<=t+1;c++)!S(r,c,n)&&T(r,c,n)&&(a+=1);return a<n[e][t].value}(e,r,t)&&!n){if(function(e,t,n){for(var a=e-1;a<=e+1;a++)for(var r=t-1;r<=t+1;r++)if(N(a,r,n))return!0;return!1}(e,r,t))return void a();c(t)}},i={display:"grid",gridTemplateColumns:"repeat(".concat(t[0].length,", 1.5rem)"),gridTemplateRows:"repeat(".concat(t.length,", 1.5rem)"),alignItems:"center",textAlign:"center",justifyItems:"center",justifyContent:"center"};return r.a.createElement("div",{style:i},t.map((function(e,i){return e.map((function(e,l){return e.isOpen?r.a.createElement(B,{key:l,tile:e,openAdjacentTiles:function(){return u(i,l)}}):r.a.createElement(b,{key:l,tile:e,open:function(){return function(e,r){if(!n&&!S(e,r,t)&&!T(e,r,t)){if(A(e,r,t))return t[e][r].isOpen=!0,void a();C(e,r,t),c(t)}}(i,l)},toggleFlag:function(){return function(e,a){n||(!function(e,t,n){n[e][t].isFlagged=!n[e][t].isFlagged}(e,a,t),c(t))}(i,l)}})}))})))},D=function(e){var t=e.game,n=e.setGame,a=e.handleShowSaveResultDialog,c=e.handleShowNotification;if(!t)return null;var u=function(e){n(Object(p.a)({},t,{board:e,isOn:!0})),function(e){return 0===e.board.reduce(I,0)}(t)&&(n(Object(p.a)({},t,{isWon:!0,isOn:!1})),a())};return r.a.createElement(f.a,null,r.a.createElement(d.a,null,r.a.createElement(R,{board:t.board,setGameOver:function(){n(Object(p.a)({},t,{isOver:!0,isOn:!1})),c("Death by mine",!0)},updateBoard:function(e){return u(e)},isOver:t.isOver})))},H=n(32),W=n.n(H),J={findAll:function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get("".concat("/results"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("".concat("/results"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y=n(87),L=n(86),q=n(81),z=function(e){var t=e.listItems,n=e.title,c=Object(a.useState)(5),u=Object(s.a)(c,2),i=u[0],l=u[1],o=t.sort((function(e,t){return e.time-t.time>0?1:-1})).slice(0,i);return r.a.createElement(Y.a,{className:"mb-2 mt-2"},r.a.createElement(Y.a.Header,null,r.a.createElement(Y.a.Title,{className:"text-center"},n)),r.a.createElement(Y.a.Body,null,0===t.length?"no results yet":r.a.createElement(L.a,{variant:"flush"},o.map((function(e){return r.a.createElement(L.a.Item,{key:e.id},e.nickname," ",r.a.createElement(q.a,{variant:"warning",className:"float-right"},e.time))})),i<t.length&&r.a.createElement(L.a.Item,{action:!0,onClick:function(){return l(i+5)}},"Show more"))))},K=function(e){var t=e.results;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"text-center"},"Best Results"),r.a.createElement(z,{title:"Easy",listItems:t.filter((function(e){return"easy"===e.difficulty}))}),r.a.createElement(z,{title:"Medium",listItems:t.filter((function(e){return"medium"===e.difficulty}))}),r.a.createElement(z,{title:"Hard",listItems:t.filter((function(e){return"hard"===e.difficulty}))}))},P=function(e){var t=e.time,n=e.setTime;return Object(a.useEffect)((function(){var e=setInterval((function(){return n(t+1)}),1e3);return function(){return clearInterval(e)}}),[t]),r.a.createElement(r.a.Fragment,null,t)},Q=function(e){var t=e.game,n=e.time,a=e.setTime;return r.a.createElement(f.a,{className:"justify-content-center mt-3"},r.a.createElement(d.a,{xs:12,sm:4},r.a.createElement("p",{className:"float-left"},"Mines: ",t?t.mines:0),r.a.createElement("p",{className:"float-right"},"Seconds: ",t&&t.isOn?r.a.createElement(P,{time:n,setTime:a}):n)))},U=function(e){var t=e.notification;return t.message?r.a.createElement(f.a,null,r.a.createElement(d.a,{className:"notification",style:{backgroundColor:t.isError?"red":"green"}},r.a.createElement("h2",null,t.message))):null},V=(n(74),n(83)),X=n(84),Z=function(e){var t=e.show,n=e.handleClose,a=e.handleNicknameChange,c=e.handleSaveResult,u=e.time;return r.a.createElement(V.a,{show:t,onHide:n,centered:!0},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Title,null,"Whohoo - you won!")),r.a.createElement(V.a.Body,null,r.a.createElement("h6",null,"Your time was ",u," seconds (not good, not bad)"),r.a.createElement(X.a.Label,null,"Give a nickname, if you want to save your result:"),r.a.createElement(X.a.Control,{className:"mb-2 mt-2",placeholder:"Your nickname",onChange:a})),r.a.createElement(V.a.Footer,null,r.a.createElement(E,{text:"Save result",onClick:c}),r.a.createElement(E,{text:"No thanks",onClick:n})))},$=function(){var e=Object(a.useState)({message:"",isError:!1}),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(!1),i=Object(s.a)(u,2),v=i[0],E=i[1],p=Object(a.useState)(null),g=Object(s.a)(p,2),b=g[0],y=g[1],w=Object(a.useState)(""),x=Object(s.a)(w,2),j=x[0],C=x[1],N=Object(a.useState)(0),S=Object(s.a)(N,2),I=S[0],M=S[1],F=Object(a.useState)([]),T=Object(s.a)(F,2),A=T[0],G=T[1];Object(a.useEffect)((function(){R()}),[]);var B=function(e,t){c({message:e,isError:t}),setTimeout((function(){c({message:"",isError:!1})}),3e3)},R=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.findAll();case 3:t=e.sent,G(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),B("Error when Fetching results, is server up?",!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),H=function(e,t,n,a){var r={board:function(e,t,n){var a=O(e,t);return k(e,t,n,a),a}(e,t,n),mines:n,difficulty:a,isOver:!1,isWon:!1,isOn:!1};M(0),y(r)},W=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={nickname:""===j?"Anonymous":j,difficulty:b.difficulty,time:I},e.prev=1,e.next=4,J.create(t);case 4:n=e.sent,G(A.concat(n)),q(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),B("Error when saving result, is server up?",!0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Y=function(e){return y(e)},L=function(e){return M(e)},q=function(){return E(!1)};return r.a.createElement(m.a,{fluid:!0},r.a.createElement(f.a,{className:"banner"},r.a.createElement(d.a,null,r.a.createElement("h1",{className:"text-center"},"Minesweeper"))),r.a.createElement(U,{notification:n}),r.a.createElement(Z,{show:v,handleNicknameChange:function(e){return C(e.target.value)},handleSaveResult:W,handleClose:q,time:I}),r.a.createElement(f.a,null,r.a.createElement(d.a,{xs:12,sm:3},r.a.createElement(K,{results:A})),r.a.createElement(d.a,{xs:12,sm:9},r.a.createElement(h,{handleCreateGame:function(e,t,n,a){return H(e,t,n,a)}}),r.a.createElement(Q,{game:b,time:I,setTime:function(e){return L(e)}}),r.a.createElement(D,{game:b,setGame:function(e){return Y(e)},handleShowSaveResultDialog:function(){return E(!0)},handleShowNotification:B}))))};n(77);u.a.render(r.a.createElement($,null),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.38d451b6.chunk.js.map