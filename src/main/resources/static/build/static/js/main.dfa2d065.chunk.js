(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{38:function(e,t,n){e.exports=n(67)},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(31),i=n.n(c),u=n(11),l=n(6),o=n.n(l),s=n(9),m=n(8),f=n(71),d=n(68),v=n(69),p=n(72),E=function(e){var t=e.text,n=e.onClick;return a.a.createElement("input",{className:"button m-1",type:"button",value:t,onClick:n})},g=function(e){var t=e.handleCreateGame;return a.a.createElement(p.a,{className:"justify-content-center"},a.a.createElement(p.a.Item,null,a.a.createElement(E,{text:"Easy 9x9",onClick:function(){return t(9,9,10,"easy")}})),a.a.createElement(p.a.Item,null,a.a.createElement(E,{text:"Medium 16x16",onClick:function(){return t(16,16,40,"medium")}})),a.a.createElement(p.a.Item,null,a.a.createElement(E,{text:"Hard 16x30",onClick:function(){return t(16,30,99,"hard")}})))},h=n(16),b=function(e){var t=e.tile,n=e.open,r=e.toggleFlag,c=function(e){e.preventDefault(),r()};return t.isFlagged?a.a.createElement(h.b,{className:"gridItem",onContextMenu:c,style:{color:"red",backgroundColor:"grey"}}):a.a.createElement("div",{className:"gridItem",onClick:n,onContextMenu:c})},O=function(e,t){return Array.from({length:e},(function(){return Array.from({length:t},(function(){return y()}))}))},y=function(){return{value:0,isOpen:!1,isFlagged:!1,isMine:!1}},k=function(e,t,n,r){for(var a=n;a>0;){var c=j(e),i=j(t);A(c,i,r)||(r[c][i].isMine=!0,x(c,i,r),a-=1)}},j=function(e){return Math.floor(Math.random()*e)},x=function(e,t,n){w(e-1,t-1,n),w(e+1,t+1,n),w(e-1,t+1,n),w(e+1,t-1,n),w(e-1,t,n),w(e+1,t,n),w(e,t-1,n),w(e,t+1,n)},w=function(e,t,n){I(e,t,n)||(n[e][t].value+=1)},C=function e(t,n,r){I(t,n,r)||r[t][n].isOpen||A(t,n,r)||(r[t][n].isOpen=!0,S(t,n,r)&&(e(t-1,n-1,r),e(t+1,n+1,r),e(t-1,n+1,r),e(t+1,n-1,r),e(t,n-1,r),e(t-1,n,r),e(t,n+1,r),e(t+1,n,r)))},N=function(e,t,n){return I(e,t,n)||T(e,t,n)||!A(e,t,n)?(C(e,t,n),!1):(n[e][t].isOpen=!0,!0)},I=function(e,t,n){return e<0||t<0||e>n.length-1||t>n[0].length-1},M=function(e,t){return e+t.filter(F).length},F=function(e){return!e.isOpen&&!e.isMine},S=function(e,t,n){return 0===n[e][t].value},T=function(e,t,n){return n[e][t].isFlagged},A=function(e,t,n){return n[e][t].isMine},G=function(e){var t=e.value,n=e.handleClick;return a.a.createElement("div",{className:"gridItem",style:{color:"".concat(function(){switch(t){case 0:return"whitesmoke";case 1:return"green";case 2:return"orange";case 3:return"red";case 4:return"purple";default:return"black"}}()),backgroundColor:"whitesmoke"},onClick:n},0===t?"":t)},B=function(e){var t=e.tile,n=e.openAdjacentTiles;return t.isMine?a.a.createElement(h.a,null):a.a.createElement(G,{value:t.value,handleClick:n})},W=function(e){var t=e.board,n=e.isOver,r=e.setGameOver,c=e.updateBoard;if(!t)return null;var i=function(e,a){if(!function(e,t,n){for(var r=0,a=e-1;a<=e+1;a++)for(var c=t-1;c<=t+1;c++)!I(a,c,n)&&T(a,c,n)&&(r+=1);return r<n[e][t].value}(e,a,t)&&!n){if(function(e,t,n){for(var r=e-1;r<=e+1;r++)for(var a=t-1;a<=t+1;a++)if(N(r,a,n))return!0;return!1}(e,a,t))return void r();c(t)}},u={display:"grid",gridTemplateColumns:"repeat(".concat(t[0].length,", 1.5rem)"),gridTemplateRows:"repeat(".concat(t.length,", 1.5rem)"),alignItems:"center",textAlign:"center",justifyItems:"center",justifyContent:"center"};return a.a.createElement("div",{style:u},t.map((function(e,u){return e.map((function(e,l){return e.isOpen?a.a.createElement(B,{key:l,tile:e,openAdjacentTiles:function(){return i(u,l)}}):a.a.createElement(b,{key:l,tile:e,open:function(){return function(e,a){if(!n&&!I(e,a,t)&&!T(e,a,t)){if(A(e,a,t))return t[e][a].isOpen=!0,void r();C(e,a,t),c(t)}}(u,l)},toggleFlag:function(){return function(e,r){n||(!function(e,t,n){n[e][t].isFlagged=!n[e][t].isFlagged}(e,r,t),c(t))}(u,l)}})}))})))},H=function(e){var t=e.game,n=e.setGame,r=e.handleIsWon,c=e.handleShowNotification;if(!t)return null;var i=function(e){n(Object(u.a)({},t,{board:e,isOn:!0})),function(e){return 0===e.board.reduce(M,0)}(t)&&(c("You won!",!1),r())};return a.a.createElement(d.a,null,a.a.createElement(v.a,null,a.a.createElement(W,{board:t.board,setGameOver:function(){n(Object(u.a)({},t,{isOver:!0,isOn:!1})),c("Death by mine",!0)},updateBoard:function(e){return i(e)},isOver:t.isOver})))},D=n(19),J=n.n(D),R={findAll:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.get("".concat("/results"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.post("".concat("/results"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y=n(73),q=n(75),z=n(70),K=function(e){var t=e.listItems,n=e.title,c=Object(r.useState)(5),i=Object(m.a)(c,2),u=i[0],l=i[1],o=t.sort((function(e,t){return e.time-t.time>0?1:-1})).slice(0,u);return a.a.createElement(Y.a,{className:"mb-2 mt-2"},a.a.createElement(Y.a.Header,null,a.a.createElement(Y.a.Title,{className:"text-center"},n)),a.a.createElement(Y.a.Body,null,0===t.length?"no results yet":a.a.createElement(q.a,{variant:"flush"},o.map((function(e){return a.a.createElement(q.a.Item,{key:e.id},e.nickname," ",a.a.createElement(z.a,{variant:"warning",className:"float-right"},e.time))})),u<t.length&&a.a.createElement(q.a.Item,{action:!0,onClick:function(){return l(u+5)}},"Show more"))))},L=function(e){var t=e.results;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",{className:"text-center"},"Best Results"),a.a.createElement(K,{title:"Easy",listItems:t.filter((function(e){return"easy"===e.difficulty}))}),a.a.createElement(K,{title:"Medium",listItems:t.filter((function(e){return"medium"===e.difficulty}))}),a.a.createElement(K,{title:"Hard",listItems:t.filter((function(e){return"hard"===e.difficulty}))}))},P=n(74),Q=function(e){var t=e.time,n=e.setTime;return Object(r.useEffect)((function(){var e=setInterval((function(){return n(t+1)}),1e3);return function(){return clearInterval(e)}}),[t]),a.a.createElement(a.a.Fragment,null,t)},U=function(e){var t=e.game,n=e.handleNicknameChange,r=e.time,c=e.setTime;return a.a.createElement(d.a,{className:"justify-content-center mt-3"},a.a.createElement(v.a,{xs:12,sm:4},a.a.createElement(P.a,{className:"mb-2 mt-2",placeholder:"Your nickname",onChange:n}),a.a.createElement("p",{className:"float-left"},"Mines: ",t?t.mines:0),a.a.createElement("p",{className:"float-right"},"Seconds: ",t&&t.isOn?a.a.createElement(Q,{time:r,setTime:c}):r)))},V=function(e){var t=e.notification;return t.message?a.a.createElement(d.a,null,a.a.createElement(v.a,{className:"notification",style:{backgroundColor:t.isError?"red":"green"}},a.a.createElement("h2",null,t.message))):null},X=(n(65),function(){var e=Object(r.useState)({message:"",isError:!1}),t=Object(m.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(null),l=Object(m.a)(i,2),p=l[0],E=l[1],h=Object(r.useState)(""),b=Object(m.a)(h,2),y=b[0],j=b[1],x=Object(r.useState)(0),w=Object(m.a)(x,2),C=w[0],N=w[1],I=Object(r.useState)([]),M=Object(m.a)(I,2),F=M[0],S=M[1];Object(r.useEffect)((function(){A()}),[]);var T=function(e,t){c({message:e,isError:t}),setTimeout((function(){c({message:"",isError:!1})}),3e3)},A=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.findAll();case 3:t=e.sent,S(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),T("Error when Fetching results, is server up?",!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),G=function(e,t,n,r){var a={board:function(e,t,n){var r=O(e,t);return k(e,t,n,r),r}(e,t,n),mines:n,difficulty:r,isOver:!1,isWon:!1,isOn:!1};N(0),E(a)},B=function(){var e=Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={nickname:""===y?"Anonymous":y,difficulty:p.difficulty,time:C},e.prev=1,e.next=4,R.create(t);case 4:n=e.sent,S(F.concat(n)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),T("Error when saving result, is server up?",!0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),W=function(e){return E(e)},D=function(e){return N(e)};return a.a.createElement(f.a,{fluid:!0},a.a.createElement(d.a,{className:"banner"},a.a.createElement(v.a,null,a.a.createElement("h1",{className:"text-center"},"Minesweeper"))),a.a.createElement(V,{notification:n}),a.a.createElement(d.a,null,a.a.createElement(v.a,{xs:12,sm:3},a.a.createElement(L,{results:F})),a.a.createElement(v.a,{xs:12,sm:9},a.a.createElement(g,{handleCreateGame:function(e,t,n,r){return G(e,t,n,r)}}),a.a.createElement(U,{game:p,time:C,setTime:function(e){return D(e)},handleNicknameChange:function(e){return j(e.target.value)}}),a.a.createElement(H,{game:p,setGame:function(e){return W(e)},handleIsWon:function(){E(Object(u.a)({},p,{isWon:!0,isOn:!1}));var e=F.filter((function(e){return e.difficulty===p.difficulty})).map((function(e){return e.time})).reduce((function(e,t){return Math.min(e,t)}));C<e&&B()},handleShowNotification:T}))))});n(66);i.a.render(a.a.createElement(X,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.dfa2d065.chunk.js.map